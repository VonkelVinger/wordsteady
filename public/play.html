<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Daily Practice • WordSteady</title>

  <style>
    :root{
      --bg:#f6f7f9; --card:#fff; --text:#121417; --muted:#5a6672; --line:#e5e9ef;
      --btn:#111827; --btnText:#fff; --soft:#f1f3f6;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    .container{max-width:560px;margin:0 auto;padding:20px 16px 40px}
    .header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .brand{font-weight:700}
    .badge{font-size:13px;color:var(--muted)}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px}
    .eyebrow{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.04em}
    h1,h2{margin:10px 0 6px}
    p{margin:8px 0;line-height:1.5}
    .divider{height:1px;background:var(--line);margin:14px 0}

    .btn{display:inline-block;padding:10px 14px;border-radius:12px;background:var(--btn);
      color:var(--btnText);text-decoration:none;font-weight:600}
    .btn.secondary{background:transparent;color:var(--text);border:1px solid var(--line)}
    .row{display:flex;gap:10px;flex-wrap:wrap}

    .reveal{
      width:100%;padding:14px;border-radius:12px;border:1px solid var(--line);
      background:var(--soft);font-weight:700;letter-spacing:.08em;cursor:pointer;
      user-select:none;
    }

    .buildArea{display:none;margin-top:12px}
    .slots,.bank{display:flex;gap:8px;flex-wrap:wrap}
    .slot{
      width:36px;height:40px;border-radius:10px;border:1px dashed var(--line);
      display:flex;align-items:center;justify-content:center;color:var(--muted)
    }
    .tile{
      width:36px;height:40px;border-radius:10px;border:1px solid var(--line);
      background:#fff;display:flex;align-items:center;justify-content:center;
      font-weight:700;cursor:pointer
    }

    .feedback{margin-top:10px;color:var(--muted);min-height:20px}
    .ok{color:var(--text)}

    .ws3{display:none;margin-top:10px}
    .choiceGrid{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
    .chip{
      border:1px solid var(--line);background:#fff;border-radius:999px;
      padding:8px 10px;cursor:pointer;font-size:13px;
    }
    .chip[aria-pressed="true"]{background:var(--soft)}
    .resultBox{margin-top:10px;border:1px solid var(--line);border-radius:12px;padding:10px}
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="brand">WordSteady</div>
    <div class="badge">Daily practice</div>
  </div>

  <div class="card">
    <h2>Steadfast</h2>
    <p><strong>Meaning:</strong> firm and reliable in purpose, loyalty, or belief</p>

    <div class="divider"></div>

    <button id="reveal" class="reveal">STEADFAST</button>

    <div id="buildArea" class="buildArea">
      <div id="slots" class="slots"></div>
      <div id="bank" class="bank"></div>
      <p id="feedback" class="feedback"></p>
    </div>

    <div class="divider"></div>

    <h2>Step 3: Use it</h2>
    <p id="ws3LockedNote">Complete Step 2 to unlock Step 3.</p>

    <div class="ws3" id="ws3">
      <p>Choose a starter. Then choose a finish.</p>

      <div>
        <p>Starters</p>
        <div id="ws3Starters" class="choiceGrid"></div>
      </div>

      <div>
        <p>Finishes</p>
        <div id="ws3Finishes" class="choiceGrid"></div>
      </div>

      <div id="ws3ResultBox" class="resultBox" style="display:none;">
        <p id="ws3ResultText"></p>
      </div>

      <p id="ws3Confirm" class="feedback ok"></p>
    </div>
  </div>
</div>
<script>
document.addEventListener("DOMContentLoaded", () => {

  /* ──────────────────────────────
     STEP 3 — TYPED SENTENCE BUILDER
     ────────────────────────────── */

  const STARTERS = [
    {
      text: "She remained steadfast when ",
      accepts: ["CLAUSE"]
    },
    {
      text: "He stayed steadfast despite ",
      accepts: ["GERUND"]
    },
    {
      text: "I try to be steadfast when ",
      accepts: ["CLAUSE"]
    }
  ];

  const FINISHES = [
    { text: "things got difficult.", form: "CLAUSE" },
    { text: "others changed their minds.", form: "CLAUSE" },
    { text: "things getting difficult.", form: "GERUND" },
    { text: "the pressure increasing.", form: "GERUND" }
  ];

  const ws3 = document.getElementById("ws3");
  const ws3LockedNote = document.getElementById("ws3LockedNote");
  const ws3Starters = document.getElementById("ws3Starters");
  const ws3Finishes = document.getElementById("ws3Finishes");
  const ws3ResultBox = document.getElementById("ws3ResultBox");
  const ws3ResultText = document.getElementById("ws3ResultText");
  const ws3Confirm = document.getElementById("ws3Confirm");

  let starterPick = null;
  let finishPick = null;

  function renderStarters() {
    ws3Starters.innerHTML = "";
    STARTERS.forEach((s, i) => {
      const b = document.createElement("button");
      b.className = "chip";
      b.textContent = s.text;
      b.setAttribute("aria-pressed", starterPick === i);
      b.onclick = () => {
        starterPick = i;
        finishPick = null;
        render();
      };
      ws3Starters.appendChild(b);
    });
  }

  function renderFinishes() {
    ws3Finishes.innerHTML = "";
    if (starterPick === null) return;

    const accepts = STARTERS[starterPick].accepts;

    FINISHES
      .filter(f => accepts.includes(f.form))
      .forEach((f, i) => {
        const b = document.createElement("button");
        b.className = "chip";
        b.textContent = f.text;
        b.setAttribute("aria-pressed", finishPick === i);
        b.onclick = () => {
          finishPick = i;
          showResult();
        };
        ws3Finishes.appendChild(b);
      });
  }

  function showResult() {
    const s = STARTERS[starterPick];
    const f = FINISHES.filter(f => s.accepts.includes(f.form))[finishPick];

    if (!f) return;

    const sentence = s.text + f.text;
    ws3ResultText.textContent = sentence;
    ws3ResultBox.style.display = "block";
    ws3Confirm.textContent = "Nice. This sentence is grammatically correct.";
  }

  function render() {
    ws3Confirm.textContent = "";
    ws3ResultBox.style.display = "none";
    renderStarters();
    renderFinishes();
  }

  function unlockStep3() {
    ws3LockedNote.style.display = "none";
    ws3.style.display = "block";
    render();
  }

  /* ─── TEMPORARY UNLOCK FOR DEMO ─── */
  unlockStep3();

});
</script>
</body>
</html>
